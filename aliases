# non private aliases - simply add to bashrc or profile with 'source .aliases'

# set the title of iTerm by reading a file in the current folder
# using to easy title the tabs for rails consoles and servers
function setItermTitle {
  if [ -f .bashname ];
  then
    echo -e "\033];`cat .bashname` $1 \007"
  fi
}

function loadRailsConsole {
  R2_CONSOLE=`pwd`"/script/console"

  if [ -f $R2_CONSOLE ];
  then
    script/console
  else
    rails console
  fi
}

function loadRailsServer {
  R2_SERVER=`pwd`"/script/server"

  if [ -f $R2_SERVER ];
  then
    script/server -p $1
  else
    rails server -p $1
  fi
}

function deploy {
  bundle exec cap $1 deploy
}

alias s='setItermTitle Server; loadRailsServer'
alias c='setItermTitle Console; loadRailsConsole'

# Rails 3
alias rc='setItermTitle Console; rails c'
alias rs='setItermTitle Server; rails s'
alias rg='rails g'
alias seed='rake db:seed'
alias be='bundle exec'

alias migrate='rake db:migrate; tmigrate'
alias rollback='rake db:rollback; trollback'

alias tmigrate='RAILS_ENV=test rake db:migrate'
alias trollback='RAILS_ENV=test rake db:rollback'

# Git
alias ga='git add'
alias gb='git branch'
alias gc='git commit'
alias gco='git checkout'
alias gd='git diff'
alias gds='git diff --staged'
alias gl='git log'
alias gp='git pull'
alias gpush='git push'
alias gs='git status -sb'

# Other
alias m='mvim .'
alias n='node'
alias redis-server='/usr/local/Cellar/redis/2.2.6/bin/redis-server'
alias redis-client='/usr/local/Cellar/redis/2.2.6/bin/redis-cli'
alias cakephp="/usr/local/cakephp/lib/Cake/Console/cake"

alias showfiles='defaults write com.apple.finder AppleShowAllFiles YES; killall Finder /System/Library/CoreServices/Finder.app'
alias hidefiles='defaults write com.apple.finder AppleShowAllFiles NO; killall Finder /System/Library/CoreServices/Finder.app'
